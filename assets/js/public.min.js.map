{"version":3,"sources":["public.js"],"names":["r","e","n","t","o","i","f","c","u","a","Error","code","p","exports","call","length","1","require","module","toggleElement","el","evt","show","getAttribute","conditions","split","fieldName","expectedValues","values","form","inputs","querySelectorAll","input","type","toLowerCase","checked","tagName","target","dataset","value","push","getFieldValues","element","bubbleElement","parentElement","findForm","conditionMet","indexOf","style","display","forEach","required","removeAttribute","setAttribute","evaluate","elements","document","handleInputEvent","className","Object","defineProperty","_default","init","addEventListener","window","2","listeners","trigger","event","args","apply","on","func","off","filter","3","getButtonText","button","innerHTML","setButtonText","text","Loader","formElement","this","querySelector","loadingInterval","character","originalButton","cloneNode","prototype","setCharacter","start","loadingText","styles","getComputedStyle","width","setInterval","tick","bind","opacity","loadingChar","stop","clearInterval","4","_slicedToArray","arr","Array","isArray","_arrayWithHoles","Symbol","iterator","_arr","_n","_d","_e","undefined","_s","_i","next","done","err","_iterableToArrayLimit","_unsupportedIterableToArray","TypeError","_nonIterableRest","minLen","_arrayLikeToArray","toString","slice","constructor","name","from","test","len","arr2","populate","parseUrlParams","q","_step","obj","_iterator","allowArrayLike","it","F","s","_e2","normalCompletion","didErr","step","_e3","_createForOfIteratorHelper","URLSearchParams","entries","_step$value","substr","arrName","forms","data","location","search","populate.js","5","CustomEvent","params","bubbles","cancelable","detail","createEvent","initCustomEvent","Event","6","_formPrefiller","_interopRequireDefault","_conditionality","_events","__esModule","default","vars","hf_js_vars","ajax_url","href","submitForm","formEl","messageElements","parentNode","removeChild","cleanFormMessages","emitEvent","formData","FormData","append","request","XMLHttpRequest","onreadystatechange","loader","response","readyState","status","JSON","parse","responseText","error","console","log","message","txtElement","createElement","role","appendChild","addFormMessage","hide_form","redirect_url","reset","createRequestHandler","open","setRequestHeader","send","eventName","dispatchEvent","preventDefault","html_forms","submit","./conditionality.js","./events.js","./form-loading-indicator.js","./form-prefiller.js","./polyfills/custom-event.js","7","basename","key","hasOwnProperty","namedItem","j","k","options","selected","Date","toISOString"],"mappings":"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","file":"public.min.js","sourcesContent":["(function () { var require = undefined; var module = undefined; var exports = undefined; var define = undefined;(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nfunction getFieldValues(form, fieldName, evt) {\n  var values = [];\n  var inputs = form.querySelectorAll('input[name=\"' + fieldName + '\"], select[name=\"' + fieldName + '\"], textarea[name=\"' + fieldName + '\"], button[name=\"' + fieldName + '\"]');\n\n  for (var i = 0; i < inputs.length; i++) {\n    var input = inputs[i];\n    var type = input.type.toLowerCase();\n\n    if ((type === 'radio' || type === 'checkbox') && !input.checked) {\n      continue;\n    } // ignore buttons which are not clicked (in case there's more than one button with same name)\n\n\n    if (type === 'button' || type === 'submit' || input.tagName === 'BUTTON') {\n      if ((!evt || evt.target !== input) && form.dataset[fieldName] !== input.value) {\n        continue;\n      }\n\n      form.dataset[fieldName] = input.value;\n    }\n\n    values.push(input.value);\n  } // default to an empty string\n  // can be used to show or hide an element when a field is empty or has not been set\n  // Usage: data-show-if=\"FIELDNAME:\"\n\n\n  if (values.length === 0) {\n    values.push('');\n  }\n\n  return values;\n}\n\nfunction findForm(element) {\n  var bubbleElement = element;\n\n  while (bubbleElement.parentElement) {\n    bubbleElement = bubbleElement.parentElement;\n\n    if (bubbleElement.tagName === 'FORM') {\n      return bubbleElement;\n    }\n  }\n\n  return null;\n}\n\nfunction toggleElement(el, evt) {\n  var show = !!el.getAttribute('data-show-if');\n  var conditions = show ? el.getAttribute('data-show-if').split(':') : el.getAttribute('data-hide-if').split(':');\n  var fieldName = conditions[0];\n  var expectedValues = (conditions.length > 1 ? conditions[1] : '*').split('|');\n  var form = findForm(el);\n  var values = getFieldValues(form, fieldName, evt); // determine whether condition is met\n\n  var conditionMet = false;\n\n  for (var i = 0; i < values.length; i++) {\n    var value = values[i]; // condition is met when value is in array of expected values OR expected values contains a wildcard and value is not empty\n\n    conditionMet = expectedValues.indexOf(value) > -1 || expectedValues.indexOf('*') > -1 && value.length > 0;\n\n    if (conditionMet) {\n      break;\n    }\n  } // toggle element display\n\n\n  if (show) {\n    el.style.display = conditionMet ? '' : 'none';\n  } else {\n    el.style.display = conditionMet ? 'none' : '';\n  } // find all inputs inside this element and toggle [required] attr (to prevent HTML5 validation on hidden elements)\n\n\n  var inputs = el.querySelectorAll('input, select, textarea');\n  [].forEach.call(inputs, function (el) {\n    if ((conditionMet || show) && el.getAttribute('data-was-required')) {\n      el.required = true;\n      el.removeAttribute('data-was-required');\n    }\n\n    if ((!conditionMet || !show) && el.required) {\n      el.setAttribute('data-was-required', 'true');\n      el.required = false;\n    }\n  });\n} // evaluate conditional elements globally\n\n\nfunction evaluate() {\n  var elements = document.querySelectorAll('.hf-form [data-show-if], .hf-form [data-hide-if]');\n  [].forEach.call(elements, toggleElement);\n} // re-evaluate conditional elements for change events on forms\n\n\nfunction handleInputEvent(evt) {\n  if (!evt.target || !evt.target.form || evt.target.form.className.indexOf('hf-form') < 0) {\n    return;\n  }\n\n  var form = evt.target.form;\n  var elements = form.querySelectorAll('[data-show-if], [data-hide-if]');\n  [].forEach.call(elements, function (el) {\n    return toggleElement(el, evt);\n  });\n}\n\nvar _default = {\n  init: function init() {\n    document.addEventListener('click', handleInputEvent, true);\n    document.addEventListener('keyup', handleInputEvent, true);\n    document.addEventListener('change', handleInputEvent, true);\n    document.addEventListener('hf-refresh', evaluate, true);\n    window.addEventListener('load', evaluate);\n    evaluate();\n  }\n};\nexports[\"default\"] = _default;\n\n},{}],2:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar listeners = {};\n\nfunction trigger(event, args) {\n  listeners[event] = listeners[event] || [];\n  listeners[event].forEach(function (f) {\n    return f.apply(null, args);\n  });\n}\n\nfunction on(event, func) {\n  listeners[event] = listeners[event] || [];\n  listeners[event].push(func);\n}\n\nfunction off(event, func) {\n  listeners[event] = listeners[event] || [];\n  listeners[event] = listeners[event].filter(function (f) {\n    return f !== func;\n  });\n}\n\nvar _default = {\n  trigger: trigger,\n  on: on,\n  off: off\n};\nexports[\"default\"] = _default;\n\n},{}],3:[function(require,module,exports){\n'use strict';\n\nfunction getButtonText(button) {\n  return button.innerHTML ? button.innerHTML : button.value;\n}\n\nfunction setButtonText(button, text) {\n  button.innerHTML ? button.innerHTML = text : button.value = text;\n}\n\nfunction Loader(formElement) {\n  this.form = formElement;\n  this.button = formElement.querySelector('input[type=\"submit\"], button[type=\"submit\"]');\n  this.loadingInterval = 0;\n  this.character = \"\\xB7\";\n\n  if (this.button) {\n    this.originalButton = this.button.cloneNode(true);\n  }\n}\n\nLoader.prototype.setCharacter = function (c) {\n  this.character = c;\n};\n\nLoader.prototype.start = function () {\n  if (this.button) {\n    // loading text\n    var loadingText = this.button.getAttribute('data-loading-text');\n\n    if (loadingText) {\n      setButtonText(this.button, loadingText);\n      return;\n    } // Show AJAX loader\n\n\n    var styles = window.getComputedStyle(this.button);\n    this.button.style.width = styles.width;\n    setButtonText(this.button, this.character);\n    this.loadingInterval = window.setInterval(this.tick.bind(this), 500);\n  } else {\n    this.form.style.opacity = '0.5';\n  }\n};\n\nLoader.prototype.tick = function () {\n  // count chars, start over at 5\n  var text = getButtonText(this.button);\n  var loadingChar = this.character;\n  setButtonText(this.button, text.length >= 5 ? loadingChar : text + ' ' + loadingChar);\n};\n\nLoader.prototype.stop = function () {\n  if (this.button) {\n    this.button.style.width = this.originalButton.style.width;\n    var text = getButtonText(this.originalButton);\n    setButtonText(this.button, text);\n    window.clearInterval(this.loadingInterval);\n  } else {\n    this.form.style.opacity = '';\n  }\n};\n\nmodule.exports = Loader;\n\n},{}],4:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e2) { throw _e2; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e3) { didErr = true; err = _e3; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nvar populate = require('populate.js'); // parse ?query=string with array support. no nesting.\n\n\nfunction parseUrlParams(q) {\n  var params = new URLSearchParams(q);\n  var obj = {};\n\n  var _iterator = _createForOfIteratorHelper(params.entries()),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var _step$value = _slicedToArray(_step.value, 2),\n          name = _step$value[0],\n          value = _step$value[1];\n\n      if (name.substr(name.length - 2) === '[]') {\n        var arrName = name.substr(0, name.length - 2);\n        obj[arrName] = obj[arrName] || [];\n        obj[arrName].push(value);\n      } else {\n        obj[name] = value;\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  return obj;\n}\n\nfunction init() {\n  if (!window.URLSearchParams) {\n    return;\n  } // only act on form elements outputted by HTML Forms\n\n\n  var forms = [].filter.call(document.forms, function (f) {\n    return f.className.indexOf('hf-form') > -1;\n  });\n\n  if (!forms) {\n    return;\n  } // fill each form with data from URL params\n\n\n  var data = parseUrlParams(window.location.search);\n  forms.forEach(function (f) {\n    populate(f, data);\n  });\n}\n\nvar _default = {\n  init: init\n};\nexports[\"default\"] = _default;\n\n},{\"populate.js\":7}],5:[function(require,module,exports){\n\"use strict\";\n\n/* window.CustomEvent polyfill for IE */\n(function () {\n  if (typeof window.CustomEvent === 'function') return false;\n\n  function CustomEvent(event, params) {\n    params = params || {\n      bubbles: false,\n      cancelable: false,\n      detail: undefined\n    };\n    var evt = document.createEvent('CustomEvent');\n    evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n    return evt;\n  }\n\n  CustomEvent.prototype = window.Event.prototype;\n  window.CustomEvent = CustomEvent;\n})();\n\n},{}],6:[function(require,module,exports){\n\"use strict\";\n\nvar _formPrefiller = _interopRequireDefault(require(\"./form-prefiller.js\"));\n\nvar _conditionality = _interopRequireDefault(require(\"./conditionality.js\"));\n\nrequire(\"./polyfills/custom-event.js\");\n\nvar _events = _interopRequireDefault(require(\"./events.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar Loader = require('./form-loading-indicator.js');\n\nvar vars = window.hf_js_vars || {\n  ajax_url: window.location.href\n};\n\nfunction cleanFormMessages(formEl) {\n  var messageElements = formEl.querySelectorAll('.hf-message');\n  [].forEach.call(messageElements, function (el) {\n    el.parentNode.removeChild(el);\n  });\n}\n\nfunction addFormMessage(formEl, message) {\n  var txtElement = document.createElement('p');\n  txtElement.className = 'hf-message hf-message-' + message.type;\n  txtElement.innerHTML = message.text; // uses innerHTML because we allow some HTML strings in the message settings\n\n  txtElement.role = 'alert';\n  var wrapperElement = formEl.querySelector('.hf-messages') || formEl;\n  wrapperElement.appendChild(txtElement);\n}\n\nfunction handleSubmitEvents(e) {\n  var formEl = e.target;\n\n  if (formEl.className.indexOf('hf-form') < 0) {\n    return;\n  } // always prevent default (because regular submit doesn't work for HTML Forms)\n\n\n  e.preventDefault();\n  submitForm(formEl);\n}\n\nfunction submitForm(formEl) {\n  cleanFormMessages(formEl);\n  emitEvent('submit', formEl);\n  var formData = new FormData(formEl);\n  [].forEach.call(formEl.querySelectorAll('[data-was-required=true]'), function (el) {\n    formData.append('_was_required[]', el.getAttribute('name'));\n  });\n  var request = new XMLHttpRequest();\n  request.onreadystatechange = createRequestHandler(formEl);\n  request.open('POST', vars.ajax_url, true);\n  request.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n  request.send(formData);\n  request = null;\n}\n\nfunction emitEvent(eventName, element) {\n  // browser event API: formElement.on('hf-success', ..)\n  element.dispatchEvent(new CustomEvent('hf-' + eventName)); // custom events API: html_forms.on('success', ..)\n\n  _events[\"default\"].trigger(eventName, [element]);\n}\n\nfunction createRequestHandler(formEl) {\n  var loader = new Loader(formEl);\n  loader.start();\n  return function () {\n    // are we done?\n    if (this.readyState === 4) {\n      var response;\n      loader.stop();\n\n      if (this.status >= 200 && this.status < 400) {\n        try {\n          response = JSON.parse(this.responseText);\n        } catch (error) {\n          console.log('HTML Forms: failed to parse AJAX response.\\n\\nError: \"' + error + '\"');\n          return;\n        }\n\n        emitEvent('submitted', formEl);\n\n        if (response.error) {\n          emitEvent('error', formEl);\n        } else {\n          emitEvent('success', formEl);\n        } // Show form message\n\n\n        if (response.message) {\n          addFormMessage(formEl, response.message);\n          emitEvent('message', formEl);\n        } // Should we hide form?\n\n\n        if (response.hide_form) {\n          formEl.querySelector('.hf-fields-wrap').style.display = 'none';\n        } // Should we redirect?\n\n\n        if (response.redirect_url) {\n          window.location = response.redirect_url;\n        } // clear form\n\n\n        if (!response.error) {\n          formEl.reset();\n        }\n      } else {\n        // Server error :(\n        console.log(this.responseText);\n      }\n    }\n  };\n}\n\ndocument.addEventListener('submit', handleSubmitEvents, false); // useCapture=false to ensure we bubble upwards (and thus can cancel propagation)\n\n_conditionality[\"default\"].init();\n\n_formPrefiller[\"default\"].init();\n\nwindow.html_forms = {\n  on: _events[\"default\"].on,\n  off: _events[\"default\"].off,\n  submit: submitForm\n};\n\n},{\"./conditionality.js\":1,\"./events.js\":2,\"./form-loading-indicator.js\":3,\"./form-prefiller.js\":4,\"./polyfills/custom-event.js\":5}],7:[function(require,module,exports){\n\n/**\n * Populate form fields from a JSON object.\n *\n * @param form object The form element containing your input fields.\n * @param data array JSON data to populate the fields with.\n * @param basename string Optional basename which is added to `name` attributes\n */\nfunction populate(form, data, basename) {\n\tfor (var key in data) {\n\t\tif (! data.hasOwnProperty(key)) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tvar name = key;\n\t\tvar value = data[key];\n\n        if ('undefined' === typeof value) {\n            value = '';\n        }\n\n        if (null === value) {\n            value = '';\n        }\n\n\t\t// handle array name attributes\n\t\tif (typeof(basename) !== \"undefined\") {\n\t\t\tname = basename + \"[\" + key + \"]\";\n\t\t}\n\n\t\tif (value.constructor === Array) {\n\t\t\tname += '[]';\n\t\t} else if(typeof value == \"object\") {\n\t\t\tpopulate(form, value, name);\n\t\t\tcontinue;\n\t\t}\n\n\t\t// only proceed if element is set\n\t\tvar element = form.elements.namedItem(name);\n\t\tif (! element) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tvar type = element.type || element[0].type;\n\n\t\tswitch(type ) {\n\t\t\tdefault:\n\t\t\t\telement.value = value;\n\t\t\t\tbreak;\n\n\t\t\tcase 'radio':\n\t\t\tcase 'checkbox':\n\t\t\t\tvar values = value.constructor === Array ? value : [value];\n\t\t\t\tfor (var j=0; j < element.length; j++) {\n\t\t\t\t\telement[j].checked = values.indexOf(element[j].value) > -1;\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase 'select-multiple':\n\t\t\t\tvar values = value.constructor === Array ? value : [value];\n\t\t\t\tfor(var k = 0; k < element.options.length; k++) {\n\t\t\t\t\telement.options[k].selected = (values.indexOf(element.options[k].value) > -1 );\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase 'select':\n\t\t\tcase 'select-one':\n\t\t\t\telement.value = value.toString() || value;\n\t\t\t\tbreak;\n\n\t\t\tcase 'date':\n      \t\t\telement.value = new Date(value).toISOString().split('T')[0];\t\n\t\t\t\tbreak;\n\t\t}\n\n\t}\n};\n\nif (typeof module !== 'undefined' && module.exports) {\n\tmodule.exports = populate;\n} \n},{}]},{},[6]);\n; })();"]}